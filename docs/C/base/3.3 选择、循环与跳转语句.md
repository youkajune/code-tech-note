---
lang: zh-CN
title: 条件、循环与跳转语句
description: if、switch、?:运算符、while、for、do...while、break、continue.
categories:
 - C语言
tags:
 - C语言
---

## 条件语句

> 这节会介绍以下关键字：if、else、switch、case、continue、break、default、goto。

大多数人都希望自己是体格强健、天资聪颖、多才多艺的能人。虽然有时事与愿违，但至少我们用 C 能写出这样的程序。诀窍是控制程序流。对于计算机科学（是研究计算机，不是用计算机做研究）而言，一门语言应该提供以下3种形式的程序流：

- 自上而下顺序执行语句序列(顺序结构)； 
- 通过测试，选择执行哪一个语句序列(分支结构/条件语句)；
- 如果满足某些条件就重复执行语句序列(循环结构/循环语句)；

第一种形式，大家应该已经很熟悉了，在前面学习的程序就是这种形式，程序自上而下一次执行每一条语句序列。接下来讲解的条件语句是第二种形式，后面会介绍的循环语句。

### 什么是条件语句？

**条件语句用于在不同的执行方案之间进行选择**，让程序更“智能”，且极大地提高了计算机的用途，让程序根据测试条件执行相应的行为。另外，本章还将复习 C 语言的逻辑运算符，分支结构和循环结构是逻辑运算符的主要应用场景，逻辑运算符能在if 的条件中测试更多关系。学完本章后，读者就可以设计按自己期望方式运行的程序。

### if 语句

#### 简单的 if 语句
![](E:\Note\Code Language\the-c\picture\basic\3-2.png)

例如，下面是输入一个整数，输出其绝对值的程序：

```c
int n;
scanf("%d", &n);
if (n < 0)
    n = -n;
printf("%d\n", n);
```

在上面的程序中，输入 -1，程序进行到 if 语句处进行判断，-1 < 0 结果为 true，执行 { } 内容使得 n = 1，结果为 1。如果输入 1，程序进行到 if 语句处进行判断，1 < 0 结果为 false，不执行 { } 内容 n 的值依旧是 1。

通过前面的例子对 if 语句已经有一些了解了，下面正式介绍下 if 语句的语法：

```c
if (expression ) 
	statement;
```

if 语句被称为分支语句（branching statement）、选择语句（selection statement）或条件语句，因为它相当于一个交叉点，程序要在两条分支中选择一条执行。

如果对 expression 求值为真（非0），则执行 statement；否则，跳过 statement。statement 可以是一条简单语句或复合语句。

绝大多数情况下，expression 是关系表达式，即比较两个量的大小（如，表达式 x > y 或 c == 6）。如果 expression 为真（即x大于y，或c == 6），则执行 statement。否则，忽略 statement。概括地说，可以使用任意表达式，表达式的值为 0 则为假。

statement 部分可以是一条简单语句，如本例所示，或者是一条用花括号括起来的复合语句（或块）：

```c
![3-3](E:\Note\Code Language\the-c\picture\basic\3-3.png)if (score > big) 
    printf("Jackpot!\n"); 
// 简单语句 
if (joe > ron) 
{ 
    // 复合语句 
    joecash++; 
    printf("You lose, Ron.\n"); 
}
```

> 注意，即使if语句由复合语句构成，整个if语句仍被视为一条语句。

#### if else 语句

简单形式的 if 语句可以让程序选择执行一条语句，或者跳过这条语句。 C 还提供了 if else 形式，可以在两条语句之间作选择。

![](E:\Note\Code Language\the-c\picture\basic\3-3.png)

例如，下面的程序表示变量 x 的值大于 3，则将 x 变为原来的两倍，否则，x 的值 +3。

```c
if(x > 3)
    x = 2 * x;
else
    x = x + 3;
```



if else 通用形式如下：

```c
if ( expression )
    statement1 
else 
    statement2
```

如果 expression 为真(非0)，则执行 statement1；如果 expression 为假(0)，则执行 else 后面的 statement2。statement1 和 statement2 可以是一条简单语句或复合语句。

> C 并不要求一定要缩进，但这是标准风格。缩进让根据测试条件的求值结果来判断执行哪部分语句一目了然。

**注意**！如果要在if和else之间执行多条语句，必须用花括号把这些语句括起来成为一个块。我们来看一下下面的代码：

```c
if (x > 0) 
    printf("Incrementing x:\n"); 
    x++; 
else // 将产生一个错误 
    printf("x <= 0 \n");
```

上面的代码将产生语法错误，因为 if 和 else 之间只能存在一条语句，编译器把 printf() 语句视为 if 语句的一部分，而把 x++; 看作一条单独的语句，它不是 if 语句的一部分。然后，编译器发现 else 并没有所属的 if，这是错误的。上面代码应该修改为：

```c
if (x > 0) 
{
    printf("Incrementing x:\n"); 
    x++;
}
else // 将产生一个错误 
    printf("x <= 0 \n");
```

#### 多重选择 —— if...else if

现实生活中我们经常有多种选择。在程序中也可以用 else if 扩展 if else 结构模拟这种情况：

```c
if (score < 60)       // 00~59 分
    printf("不及格");
else if (score < 80)  // 60~79 分
    printf("及格");
else if (score < 90)  // 80~89 分
    printf("良好");
else                  // 90 分以上
    printf("优秀");
```

实际上，else if 是已学过的 if else 语句的变式。如果改为 if else 的写法，代码如下：

```c
if (score < 60)       // 00~59 分
    printf("不及格");
else 
    if (score < 80)  // 60~79 分
    	printf("及格");
	else 
    	if (score < 90)  // 80~89 分
    		printf("良好");
        else             // 90 分以上
    		printf("优秀");
```

也就是说，该程序由一个 if else 语句组成，else 部分包含另一个 if else 语句，该 if else 语句的 else 部分又包含另一个 if else 语句。第2个 if else 语句嵌套在第1个 if else 语句中，第3个 if else 语句嵌套在第2个 if else 语句中。

回忆一下，整个 if else 语句被视为一条语句，因此不必把嵌套的 if else 语句用花括号括起来。当然，花括号可以更清楚地表明这种特殊格式的含义。

这两种形式完全等价。唯一不同的是使用空格和换行的位置不同，不过编译器会忽略这些。尽管如此，第1种形式还是好些，因为这种形式更清楚地显示了有 4 种选择。在浏览程序时，这种形式让读者更容易看清楚各项选择。

#### else 和 if 的配对规则

如果程序中有许多if和else，编译器如何知道哪个if对应哪个else？例如，考虑下面的程序段：

```c
if (number > 6) 
if (number < 12) 
    printf("You're close!\n"); 
else 
    printf("Sorry, you lose a turn!\n");
```

何时打印 Sorry, you lose a turn!？当 number 小于或等于 6 时，还是 number 大于 12 时？换言之，else 与第1个 if 还是第2个 if 匹配？答案是，else 与第2个 if 匹配。也就是说，输入的数字和匹配的响应如下： 

```c
数字 响应 
5    None 
10   You’re close! 
15   Sorry, you lose a turn!
```

else 与 if 的**配对规则**是，如果没有花括号，else 与离它最近的 if 匹配，除非最近的 if 被花括号括起来。

> 快速记忆：else 和 if 的配对遵循就近原则。

![](E:\Note\Code Language\the-c\picture\basic\3-4.png)

![](E:\Note\Code Language\the-c\picture\basic\3-5.png)

注意：要缩进“语句”，“语句”可以是一条简单语句或复合语句，缩进的语句更便于阅读。因此前面例子的缩进应该是这样的：

```c
if (number > 6) 
    if (number < 12) 
        printf("You're close!\n"); 
	else 
    	printf("Sorry, you lose a turn!\n");
```

第1个例子中的缩进使得 else 看上去与第1个 if 相匹配，但是记住，编译器是忽略缩进的。



如果希望 else 与第1个 if 匹配，应该这样写： 

```c
if (number > 6) 
{
    if (number < 12) 
        printf("You're close!\n"); 
}
else 
    printf("Sorry, you lose a turn!\n");
```

#### 逻辑运算符与条件语句

读者应该已经已经熟悉了 if 语句，if 语句通常使用关系表达式作为测试条件，而有时候把多个关系表达式组合起来会很有用，这时就需要用到逻辑运算符来组合多个关系表达式。

例如，当 3 <= x <= 7 的时候，输出 Yes，否则输出 No。

```c
if (x >= 3 && x <= 7) 
    printf("Yes");
else
    printf("No");
```

注意，if 的测试条件中的关系表达式不能直接写作 3 <= x <= 7，C 编译器会视为语义错误，需要用逻辑运算符来进行组合。如果不熟悉逻辑运算符或者觉得很别扭，请记住：(练习&&时间) == 完美。

### ?: 条件运算符

C提供条件表达式（conditional expression）作为表达 if else 语句的一种便捷方式，该表达式使用 ?: 条件运算符。该运算符分为两部分，需要 3 个运算对象。回忆一下，带一个运算对象的运算符称为一元运算符，带两个运算对象的运算符称为二元运算符。以此类推，带 3 个运算对象的运算符称为三元运算符。条件运算符是C语言中唯一的三元运算符。下面的代码得到一个数的绝对值：

```c
y = (x>0)?x:-x;
```

在=和;之间的内容就是条件表达式，该语句的意思是“如果 x 大于 0，那么 y = x 否则，y = -x”。

条件表达式的通用形式： `expression1 ? expression2 : expression3 `。

如果 expression1 为真(非 0)，那么整个条件表达式的值与 expression2 的值相同；如果 expression1 为假(0)，那么整个条件表达式的值与 expression3 的值相同。 

需要把两个值中的一个赋给变量时，就可以用条件表达式。典型的例子是，把两个值中的最大值赋给变量：`z = (x>y)?x:y;`

通常，条件运算符完成的任务用 if else 语句也可以完成。但是，使用条件运算符的代码更简洁，而且编译器可以生成更紧凑的程序代码。 

### switch 语句

#### switch 用法

使用条件运算符和 if else 语句很容易编写二选一的程序。然而，有时程序需要在多个选项中进行选择。可以用 if else if...else 来完成。但是，大多数情况下使用 switch 语句更方便。switch 语句的语法：

```c
switch(整型表达式) 
{
    case 常量1: 
        语句; // 可选
    case 常量2: 
        语句; // 可选 
        ...
    default : // 可选 
        语句; // 可选 
}
```
要对紧跟在关键字 switch 后圆括号中的表达式求值。在示例程序中该表达式是刚输入给 ch 的值。然后程序扫描标签（这里指，case 'a' :、case 'b' :等）列表，直到发现一个匹配的值为止，然后程序跳转至那一行。

**如果没有匹配的标签怎么办**？如果有 default: 标签行，就跳转至该行；否则，程序继续执行在 switch 后面的语句。

**break 语句在其中起什么作用**？它让程序离开 switch 语句，跳至 switch 语句后面的下一条语句。如果没有 break 语句，就会从匹配标签开始执行到 switch 末尾。

请看下面的示例程序：

```c
#include <stdio.h> 
#include <ctype.h> 
int main(void) 
{
    char ch; 
    printf("Give me a letter of the alphabet, and I will give an animal name beginning with that letter.\n"); 
    printf("Please type in a letter; type # to end my act.\n"); 
    while ((ch = getchar()) != '#') 
    {
        if ('\n' == ch) 
            continue; 
        if (islower(ch)) /* 只接受小写字母*/ 
            switch (ch) 
            {
            case 'a': 
                printf("argali, a wild sheep of Asia\n"); 
                break; 
            case 'b': 
                printf("babirusa, a wild pig of Malay\n"); 
                break; 
            case 'c': 
                printf("coati, racoonlike mammal\n"); 
                break; 
            case 'd': 
                printf("desman, aquatic, molelike critter\n"); 
                break; 
            case 'e': 
                printf("echidna, the spiny anteater\n"); 
                break; 
            case 'f': 
                printf("fisher, brownish marten\n");
                break; 
            default: 
                printf("That's a stumper!\n"); 
            } /* switch结束 */ 
        else 
            printf("I recognize only lowercase letters.\n"); 
        while (getchar() != '\n') continue; /* 跳过输入行的剩余部分 */ 
        printf("Please type another letter or a #.\n"); 
    } /* while循环结束 */ 
    printf("Bye!\n"); 
    return 0; 
}
```

输出示例：

```c
Give me a letter of the alphabet, and I will give an animal name beginning with that letter. 
Please type in a letter; type # to end my act.
a [enter]
argali, a wild sheep of Asia 
Please type another letter or a #.
# [enter] 
Bye!
```

如果删除该程序中的所有 break 语句，运行程序后输入 d，其交互的输出结果如下： 

```c
Give me a letter of the alphabet, and I will give an animal name beginning with that letter. 
Please type in a letter; type # to end my act. 
d [enter] 
desman, aquatic, molelike critter 
echidna, the spiny anteater 
fisher, a brownish marten 
That's a stumper! 
Please type another letter or a #. 
# [enter] 
Bye! 
```

如上所示，执行了从 case 'd': 到 switch 语句末尾的所有语句。

![](E:\Note\Code Language\the-c\picture\basic\3-6.png)

![](E:\Note\Code Language\the-c\picture\basic\3-7.png)

顺带一提，break 语句可用于循环和 switch 语句中，但是 continue 只能用于循环中。尽管如此，如果 switch 语句在一个循环中，continue 便可作为 switch 语句的一部分。这种情况下，就像在其他循环中一样，continue 让程序跳出循环的剩余部分，包括 switch 语句的其他部分。break 和 continue 在循环中的作用区别见下一节循环结构。

#### 注意事项

**switch 语句的注意事项**：

1. C语言的 case 一般都指定一个值，不能使用一个范围。
2. switch 在圆括号中的测试表达式的值应该是一个整数值（包括 char 类型）。case 标签必须是整数类型(包括  char 类型)的常量或整型常量表达式(即，表达式中只包含整型常量)。不能用变量作为 case 标签。

#### switch 和 if else 语句的选择

**何时使用 switch？何时使用 if else？** 

你经常会别无选择，因为如果是根据浮点类型的变量或表达式来选择，就无法使用 switch。

如果根据变量在某范围内决定程序流的去向，使用 switch 就很麻烦，这种情况用 if 就很方便。

但是，如果使用 switch，程序通常运行快一些，生成的代码少一些。

## 循环语句

C语言的条件语句有两种 —— if & switch，还有一个运算符 —— ?:。而C语言的循环语句有3种 —— while、do while、for。

### 什么是循环语句？

现在我们有这样一个需求，想要打印一个如下所示的图形：

```c
#
##
###
####
#####
```

用我们之前学习的方法来实现，代码如下：

```c
printf("#\n");
printf("##\n");
printf("###\n");
printf("####\n");
printf("#####\n");
```

按照以前学习的方法很容易打印出上面要求的图形，但是我们可以看到，其实这个过程没啥技术含量，完全是复制粘贴，然后在 printf 语句中添加一个 '#'，如果现在要我们打印 100 行的图形，难道还要一行一行的添加吗？即使你不嫌麻烦地写了 100 行代码，现在需求编程了打印 10000 行，你还要一行一行的写吗？

循环结构就为我们提供了解决这样重复执行相同步骤的方法。

### while 循环

#### while 循环语法

while 语句的语法：

```c
while(循环条件表达式)
{
    循环执行的语句;
    循环条件更新;
}
```

写 while 循环的时候最重要的一点就是更新循环条件，否则，循环就不会停止，我们称之为死循环。(PS：事实上，不更新循环条件，也是可以通过 if 语句和 break 来终止循环的，这个在之后会讲，目前我们还只能通过更新循环条件，让循环条件表达式结果为假来终止循环)。

考虑下面的例子：

```c
int i = 1;
while(i <= 5)
{
    printf("%d\n", i);
}
```

上面的程序段将打印无数次 1。为什么？因为循环中 i 的值一直都是原来的值 1，不曾变过。现在，考虑下面的程序段： 

```c
int i = 1;
while(--i <= 5)
{
    printf("%d\n", i);
}
```

这段程序也好不到哪里去。虽然改变了 i 的值，但是改错了！不过，这个版本至少在 i 减少到其类型到可容纳的最小负值并变成最大正值时会终止循环。

#### 示例代码

```c
#include <stdio.h> 
#define ADJUST 7.31 // 字符常量 
int main(void) 
{
    const double SCALE = 0.333;// const变量 
    double shoe, foot; 
    shoe = 9.0; 
    foot = SCALE * shoe + ADJUST; 
    printf("Shoe size (men's) foot length\n"); 
    printf("%10.1f %15.2f inches\n", shoe, foot); 
    return 0; 
}
```

上面的代码实现了将鞋码转换成英寸的功能，程序使用了乘法和加法，假定用户穿 9 码的鞋，以英寸为单位打印用户的脚长。你可能会说：“这太简单了，我用笔算比敲程序还要快。”说得没错。写出来的程序只使用一次（本例即只根据一只鞋的尺码计算一次脚长），实在是浪费时间和精力。如果写成交互式程序会更有用，但是仍无法利用计算机的优势。

计算机的优势就在于做一些重复计算的工作，我们使用 while 循环改进后的程序：

```c
#include <stdio.h> 
#define ADJUST 7.31 // 字符常量 
int main(void) 
{
    const double SCALE = 0.333;// const变量 
    double shoe, foot; 
    printf("Shoe size (men's) foot length\n"); 
    shoe = 3.0;
	while (shoe < 18.5) /* while循环开始 */ 
    {   /* 块开始 */ 
        foot = SCALE * shoe + ADJUST; 
        printf("%10.1f %15.2f inches\n", shoe, foot); 
        shoe = shoe + 1.0; 
    } /* 块结束 */ 
    printf("If the shoe fits, wear it.\n"); 
    return 0; 
}
```

下面是shoes2.c程序的输出（...表示并未显示完整，有删节）： 

```
Shoe size (men's) foot length 
3.0 8.31 inches 
4.0 8.64 inches 
5.0 8.97 inches 
6.0 9.31 inches 
... 
16.0 12.64 inches 
17.0 12.97 inches 
18.0 13.30 inches 
If the shoe fits, wear it. 
```

下面解释一下while循环的原理。当程序第 1 次到达 while 循环时，会检查圆括号中的条件是否为真。该程序中，条件表达式是：`shoe < 18.5`。变量 shoe 被初始化为 3.0，显然小于 18.5。因此，该条件为真，程序进入块中继续执行，把尺码转换成英寸。然后打印计算的结果。下一条语句把 shoe 增加 1.0，使 shoe 的值为 4.0： `shoe = shoe + 1.0; `此时，程序返回 while 入口检查条件。

为何要返回 while 的入口部分？因为上面这条语句的下面是右花括号(})，代码使用一对花括号({})来标出 while 循环的范围。**花括号之间的内容就是要被重复执行的内容。**花括号以及被花括号括起来的部分被称为块(block)。

现在，回到程序中。因为 4 小于 18.5，所以要重复执行被花括号括起来的所有内容(用计算机术语来说就是，程序循环这些语句)。该循环过程一直持续到 shoe 的值为 19.0。此时，由于 19.0 小于 18.5，所以该条件为假：`shoe < 18.5 `出现这种情况后，控制转到紧跟 while 循环后面的第 1 条语句。该例中，是最后的 printf() 语句。

可以很方便地修改该程序用于其他转换。例如，把 SCALE 设置成 1.8、ADJUST 设置成 32.0，该程序便可把摄氏温度转换成华氏温度；把 SCALE 设置成 0.6214、ADJUST 设置成 0，该程序便可把公里转换成英里。注意，修改了设置后，还要更改打印的消息，以免前后表述不一。

#### 应用：C 风格的读取循环

```c
int num;
while (scanf("%d", &num) == 1) 
{
    /*循环行为*/ 
}
```

上面的代码同时使用 scanf() 的两种不同的特性。首先，如果函数调用成功，scanf() 会把一个值存入 num。然后，利用 scanf() 的返回值（0或1，不是 num 的值）控制 while 循环。因为每次迭代都会判断循环的条件，所以每次迭代都要调用 scanf() 读取新的 num 值来做判断。换句话说，C 的语法特性让你可以用下面的精简版本替换标准版本： 当获取值和判断值都成功，处理该值。

利用 C 语言中非零值为真的特性，可以进一步精简，将循环条件表达式中的 == 1 省略。

```c
int num;
while (scanf("%d", &num)) 
{
    /*循环行为*/ 
}
```

#### while 循环小测验

判断下面的几段代码是否存在问题？

**代码1：**

```c
int i = 0;
while(i = 3)
{
    printf("hello\n");
    i++;
}
```

**答案**：有问题，循环测试条件是一个赋值语句，而不是关系表达式，因此测试条件 `i = 3` 的值一直是 3，因此循环会一直进行，是死循环。应该将 `i = 3` 修改为 `i == 3` 或者 `i < 3`。

**代码2**：

```c
int i = 0;
while(i = 0)
{
    printf("hello\n");
    i++;
}
```

**答案**：不会出现死循环，并且循环语句永远不会被执行。因为循环条件表达式中赋值语句的值是 0，while 判断是假，不执行循环语句。

#### 不确定循环和计数循环

一些 while 循环是不确定循环(indefinite loop)。所谓不确定循环，指在测试表达式为假之前，预先不知道要执行多少次循环。例如，C 风格的读取循环。我们事先并不知道用户会结束输入整数。另外，还有一类是计数循环(counting loop)。这类循环在执行循环之前就知道要重复执行多少次。下面的代码就是一个简单的计数循环。

```c
#include <stdio.h> 
int main(void) 
{
    const int NUMBER = 22; 
    int count = 1; // 初始化 
    while (count <= NUMBER) // 测试 
    {
        printf("Be my Valentine!\n"); // 行为 
        count++; // 更新计数 
    }
    return 0; 
}
```

虽然上面的代码运行情况良好，但是定义循环的行为并未组织在一起，程序的编排并不是很理想。我们来仔细分析一下，在创建一个重复执行固定次数的循环中涉及了3个行为： 

1. 必须初始化计数器； 
2. 计数器与有限的值作比较； 
3. 每次循环时递增计数器。 

while 循环的测试条件执行比较，递增运算符执行递增。代码中，递增发生在循环的末尾，这可以防止不小心漏掉递增。因此，这样做比将测试和更新组合放在一起(即使用 count++ <= NUMBER)要好，但是计数器的初始化放在循环外，就有可能忘记初始化。实践告诉我们可能会发生的事情终究会发生，所以我们来学习另一种控制语句 —— for 循环，可以避免这些问题。

### for 循环

#### for 循环语法

for 循环把上述3个行为(初始化、测试和更新)组合在一处，请看下面的 for 循环示例：

```c
#include <stdio.h> 
int main(void) 
{
    const int NUMBER = 22; 
    for (int count = 1; count <= NUMBER; count++) 
        printf("Be my Valentine!\n"); 
    return 0; 
}
```

**for 语句常用格式**：

```c
for(初始化语句;循环条件表达式;表达式更新)
{
    /*循环语句*/
}
```

关键字 for 后面的圆括号中有3个表达式，分别用两个分号隔开。第 1 个表达式是初始化，只会在 for 循环开始时执行一次。第 2 个表达式是测试条件，在执行循环之前对表达式求值。如果表达式为假时，循环结束。第 3 个表达式执行更新，在每次循环结束时求值。

for 圆括号中的表达式也叫做控制表达式，它们都是完整表达式，所以每个表达式的副作用(如，递增变量)都发生在对下一个表达式求值之前。

![](E:\Note\Code Language\the-c\picture\basic\3-8.png)

对于计数循环，for 循环的第一行包括了循环所需的所有信息：初始值，终值，每次循环的增量。

#### for 语句的灵活性

for 循环中的三个表达式给予了 for 循环对于计数循环很强的灵活性。

1. 除了计数器递增，还可以使用递减运算符来递减计数器。
    ```
    for (secs = 5; secs > 0; secs--) 
    ```
    
1. 可以让计数器每次递增、递减指定长度的增量，而不只是 1。
    ```
    for (n = 2; n < 60; n = n + 13) 
    ```
    
1. 可以用字符代替数字计数。
    ```
    for (ch = 'a'; ch <= 'z'; ch++) 
    ```
    
1. 除了测试迭代次数之外，还可以测试其他条件。
    ```
    for (num = 1; num*num*num <= 216; num++) 
    ```
    
1. 可以让递增的量几何增长，而不是算术增长。
    ```
    for (debt = 100.0; debt < 150.0; debt = debt * 1.1) 
    ```
    
1. 第3个表达式可以使用任意合法的表达式。无论是什么表达式，每次迭代都会更新该表达式的值。 
    ```
    for (x = 1; y <= 75; y = (++x * 5) + 50) 
    ```
    
1. 可以省略一个或多个表达式(但是不能省略分号)，只要在循环中包含能结束循环的语句即可。
    ```
    for (n = 3; ans <= 25;) // 更新表达式放在了{}中
    ```
    
1. 循环体中的行为可以改变循环头中的表达式。

### do while 循环

while 循环和 for 循环都是入口循环，即在循环的每次迭代之前检查测试条件，所以有可能根本不执行循环体中的内容。而 do while 循环是出口循环，即在循环的每次迭代之后检查测试条件，这保证了至少执行循环体中的内容一次。

```c
#include <stdio.h> 
int main(void) 
{
    const int secret_code = 13; 
    int code_entered; 
    do
    {
        printf("To enter the triskaidekaphobia therapy club,\n"); 
        printf("please enter the secret code number: "); 
        scanf("%d", &code_entered); 
    } while (code_entered != secret_code); 
    printf("Congratulations! You are cured!\n"); 
    return 0; 
}
```

下面是do while循环的通用形式： 

```c
do
    statement 
while ( expression );
```

![](E:\Note\Code Language\the-c\picture\basic\3-9.png)

### 如何选择循环

如何选择循环？

**首先，****确定是需要入口条件循环还是出口条件循环**。通常，入口条件循环用得比较多。有几个原因，其一，一般原则是在执行循环之前测试条件比较好。其二，测试放在循环的开头，程序的可读性更高。其三，在许多应用中，要求在一开始不满足测试条件时就直接跳过整个循环。因此，我们通常是 while 循环和 for 循环中选择一个。

**那么，到底是选择 while 循环还是 for 循环**？这取决于个人喜好，因为二者皆可，要让 for 循环看起来像 while 循环，直接将第一个表达式和第三个表达式省略即可。要让 while 循环像 for 循环，直接在 while 前面初始化变量，在 while 循环体中包含更新语句。

一般而言，当循环涉及初始化和更新变量时(例如计数循环)，用 for 循环比较合适，而在其他情况下用 while 循环更好。

### 循环的嵌套

还记得我们刚开始的打印图形的例子吗？

```c
#
##
###
####
#####
```

我们用之前学习的循环结构可以打印指定数目的 '#' 字符了。

```c
for(int i = 0; i < n; i++)
    printf("#");
```

其中 n 是指定打印几个 '#' 字符。

如果想要打印上面指定的图形，就需要用到嵌套循环了。

```c
int i = 0, j = 0;
int n = 5;
while(i < n)
{
    j = 0;
    while(j <= i)
    {
    	printf("#");
        j++;
    }
    printf("\n");
    i++;
}
```

如果我们想要打印 100 行图形，只需要将 n 修改为 100 即可。

## 跳转语句

一般而言，程序进入循环后，在下一次循环测试之前会执行完循环体中的所有语句。continue 和 break 语句可以根据循环体中的测试结果来忽略一部分循环内容，甚至结束循环。

### continue

continue 只用在循环语句中，常搭配 if 语句使用。执行到该语句时，会跳过本次迭代的剩余部分，并开始下一轮迭代。如果 continue 语句在嵌套循环内，则只会影响包含该语句的内层循环。

```c
#include <stdio.h>
int main()
{
    char c = 0;
    while(c!='\n')
    {  //回车键结束循环
        c=getchar();
        if(c=='4' || c=='5')  //按下的是数字键4或5
            continue;  //跳过当次循环，进入下次循环
        putchar(c);
    }
    return 0;
}
```

本例我们输入的是 0123456789，当读取到 4 或 5 时，if 的条件 c=='4'||c=='5' 成立，就执行 continue 语句，结束当前循环，直接进入下一次循环，也就是说 putchar(c); 不会被执行到。而读取到其他数字时，if 的条件不成立，continue 语句不会被执行到，putchar(c); 就会输出读取到的字符。

这种情况下，使用 continue 的好处是减少主语句组中的一级缩进。当语句很长或嵌套较多时，紧凑简洁的格式提高了代码的可读性。例如我们下面演示了不使用 continue 的情况，需要将剩下的语句放在 else 中。

```c
#include <stdio.h>
int main()
{
    char c = 0;
    while(c!='\n')  //回车键结束循环
    {
        c=getchar();
        if(c=='4' || c=='5')  //按下的是数字键4或5
            continue;  //跳过当次循环，进入下次循环
        else 
        {
        	putchar(c);
        }
    }
    return 0;
}
```

continue 还可用作占位符。例如，下面的循环读取并丢弃输入的数据，直至读到行末尾： 

```c
while (getchar() != '\n');
```

当程序已经读取一行中的某些内容，要跳至下一行开始处时，这种用法很方便。问题是，一般很难注意到一个单独的分号。如果使用 continue，可读性会更高： 

```c
while (getchar() != '\n') 
	continue; 
```

### break

break 可以用在循环和 switch 中，在循环中常和 if 搭配使用。程序执行到循环中的 break 语句时，会终止包含它的循环，并继续执行下一阶段。如果 break 语句位于嵌套循环内，它只会影响包含它的当前循环。

在 for 循环中的 break 和 continue 的情况不同，执行完 break 语句后会直接执行循环后面的第 1 条语句，连更新部分也跳过。而 continue 会执行 for 循环的更新部分。

### goto

早期版本的 BASIC 和 FORTRAN 所依赖的 goto 语句，在 C 中仍然可用。但是 C 和其他两种语言不同，没有 goto 语句 C 程序也能运行良好。Kernighan 和 Ritchie 提到 goto 语句“易被滥用”，并建议“谨慎使用，或者根本不用”。

介绍一下如何使用 goto 语句。。goto 语句有两部分：goto 和标签名。标签的命名遵循变量命名规则，如下所示：`goto part2; `要让这条语句正常工作，函数还必须包含另一条标为 part2 的语句，该语句以标签名后紧跟一个冒号开始： 

```c
part2: printf("Refined analysis:\n"); 
```

原则上，根本不用在C程序中使用 goto 语句。

因为 goto 的出现是因为 BASIC 和 FORTRAN 的 if else 语句后面只能跟一条语句，因此需要用 goto 来实现复合语句，而 C 本身就支持用 {} 括起来的复合语句，因此不需要用到 goto 语句。

讽刺地是，虽然 C 根本不需要 goto，但是它的 goto 比其他语言的 goto 好用，因为 C 允许在标签中使用描述性的单词而不是数字。